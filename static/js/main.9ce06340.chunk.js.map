{"version":3,"sources":["BooksAPI.js","shelves.js","component/Book.js","component/BookShelf.js","component/HomePage.js","component/SearchBooks.js","BooksApp.js","index.js"],"names":["api","token","localStorage","Math","random","toString","substr","headers","Accept","Authorization","getAll","fetch","concat","then","res","json","data","books","update","book","shelf","id","method","Object","objectSpread","Content-Type","body","JSON","stringify","search","query","shelves","currentlyReading","wantToRead","read","Book","handleShelfChange","event","toShelf","target","value","_this","props","onShelfChange","render","react_default","a","createElement","className","style","width","height","backgroundImage","imageLinks","thumbnail","defaultValue","onChange","disabled","entries","map","_ref","_ref2","slicedToArray","key","title","authors","join","React","Component","BookShelf","_this$props","index","component_Book","HomePage","state","componentDidMount","refreshBooks","setState","reduce","console","log","component_BookShelf","onClick","history","push","SearchBooks","myBooks","handleQueryChange","length","_this$state","type","placeholder","myBook","get","_this2","this","Map","BooksApp","Switch","Route","exact","path","component","ReactDOM","BrowserRouter","basename","process","src_BooksApp","document","getElementById"],"mappings":"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","file":"static/js/main.9ce06340.chunk.js","sourcesContent":["\r\nconst api = \"https://reactnd-books-api.udacity.com\"\r\n\r\n\r\n// Generate a unique token for storing your bookshelf data on the backend server.\r\nlet token = localStorage.token\r\nif (!token)\r\n  token = localStorage.token = Math.random().toString(36).substr(-8)\r\n\r\nconst headers = {\r\n  'Accept': 'application/json',\r\n  'Authorization': token\r\n}\r\n\r\nexport const get = (bookId) =>\r\n  fetch(`${api}/books/${bookId}`, { headers })\r\n    .then(res => res.json())\r\n    .then(data => data.book)\r\n\r\nexport const getAll = () =>\r\n  fetch(`${api}/books`, { headers })\r\n    .then(res => res.json())\r\n    .then(data => data.books)\r\n\r\nexport const update = (book, shelf) =>\r\n  fetch(`${api}/books/${book.id}`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      ...headers,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ shelf })\r\n  }).then(res => res.json())\r\n\r\nexport const search = (query) =>\r\n  fetch(`${api}/search`, {\r\n    method: 'POST',\r\n    headers: {\r\n      ...headers,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ query })\r\n  }).then(res => res.json())\r\n    .then(data => data.books)\r\n","export const shelves = {\r\n  'currentlyReading': 'Currently Reading',\r\n  'wantToRead': 'Want to Read',\r\n  'read': 'Read',\r\n}","import React from 'react'\r\n\r\nimport { shelves } from '../shelves'\r\nimport { update } from '../BooksAPI'\r\n\r\nclass Book extends React.Component {\r\n  handleShelfChange = event => {\r\n    const toShelf = event.target.value\r\n    update(this.props.book, toShelf).then(() => {\r\n      if (this.props.onShelfChange) {\r\n        this.props.onShelfChange()\r\n      }\r\n    })\r\n  }\r\n\r\n  render = () => {  \r\n    const { book } = this.props\r\n\r\n    return (\r\n      <div className=\"book\">\r\n        <div className=\"book-top\">\r\n          <div\r\n             className=\"book-cover\"\r\n             style={{\r\n               width: 128,\r\n               height: 193,\r\n               backgroundImage:`url( ${book.imageLinks? book.imageLinks.thumbnail : '' })`\r\n             }}\r\n       \r\n           ></div>\r\n\r\n          <div className=\"book-shelf-changer\">\r\n            <select\r\n              defaultValue={book.shelf || 'none'}\r\n              onChange={this.handleShelfChange}\r\n            >\r\n              <option value=\"move\" disabled>Move to...</option>\r\n              {Object.entries(shelves).map(([key, title]) => (\r\n                <option\r\n                  key={key}\r\n                  value={key}\r\n                >{title}</option>\r\n              ))}\r\n              <option value=\"none\">None</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div className=\"book-title\">{book.title}</div>\r\n        {book.authors &&\r\n          <div className=\"book-authors\">{book.authors ? book.authors.join(', ') : 'None'}</div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Book","import React from 'react'\r\nimport Book from './Book'\r\n\r\nclass BookShelf extends React.Component {\r\n  \r\n  render = () => {\r\n    const { title, books } = this.props\r\n    // console.log(books)\r\n\r\n    return (\r\n      <div className=\"bookshelf\">\r\n        <h2 className=\"bookshelf-title\">{title}</h2>\r\n        <div className=\"bookshelf-books\">\r\n          <ol className=\"books-grid\">\r\n            {books.map((book, index) => (\r\n              <li key={index}>\r\n                <Book\r\n                  book={book}\r\n                  onShelfChange={this.props.onShelfChange}\r\n                />\r\n              </li>\r\n            ))}\r\n          </ol>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default BookShelf","import React from 'react'\r\n\r\nimport { getAll } from '../BooksAPI'\r\nimport { shelves } from '../shelves'\r\nimport BookShelf from './BookShelf'\r\n\r\nclass HomePage extends React.Component {\r\n  state = {\r\n    books: []\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.refreshBooks()\r\n   \r\n  }\r\n  /*get all user's book,here books is an array */\r\n  refreshBooks = () => {\r\n    getAll().then(books => {\r\n      this.setState(() => {\r\n        return {books: books}\r\n      })     \r\n  })}\r\n\r\n  onShelfChange = () => {\r\n    this.refreshBooks()\r\n  }\r\n\r\n  render = () => {\r\n\r\n    /*group books by bookshelf, here books is an object*/\r\n    const books = this.state.books.reduce((books, book) => {\r\n      if (book.shelf) {\r\n        books[book.shelf] = (books[book.shelf] || []).concat([book])\r\n      }\r\n      return books\r\n    }, {})\r\n   console.log(books)\r\n    /*pass the books object to BookShelf component */\r\n    return (\r\n      <div className=\"list-books\">\r\n          <div className=\"list-books-title\">\r\n              <h1>MyReads</h1>\r\n          </div>\r\n         \r\n          <div>\r\n            {\r\n                Object.entries(shelves).map(([key, title]) => (\r\n                  <BookShelf\r\n                    key={key}\r\n                    title={title}\r\n                    books={books[key] || []}\r\n                    onShelfChange={this.onShelfChange}\r\n                  />\r\n                ))\r\n            }\r\n          </div>   \r\n\r\n          <div className=\"open-search\">\r\n            <button onClick={() => { this.props.history.push('/search') }}>Add a book</button>\r\n          </div>    \r\n      </div> \r\n  ) \r\n}\r\n}\r\n\r\nexport default HomePage","import React from 'react'\r\n\r\nimport Book from './Book'\r\nimport { search, getAll } from '../BooksAPI'\r\n\r\nclass SearchBooks extends React.Component {\r\n  state = {\r\n    query: '',\r\n    books: [],\r\n    myBooks: {}\r\n  }\r\n\r\n  componentDidMount() {\r\n    getAll().then(books => {\r\n      const myBooks = new Map(\r\n        books.length\r\n          ? books.map(book => [book.id, book])\r\n          : []\r\n      )\r\n      this.setState({\r\n        myBooks:myBooks\r\n      })\r\n    })\r\n  }\r\n\r\n  handleQueryChange = event => {\r\n    const query = event.target.value\r\n    this.setState(\r\n      { query:query}\r\n    )\r\n    if (query.length > 0) {\r\n      search(query).then(books => {\r\n        this.setState({\r\n          books: books.length ? books : [],\r\n        })\r\n      })\r\n    }\r\n    if (query.length === 0) {\r\n        this.setState({\r\n          books: [],\r\n        })\r\n    \r\n    }\r\n  }\r\n\r\n  render = () => {\r\n    const { query, books, myBooks } = this.state\r\n    console.log(myBooks)\r\n    return (\r\n      <div className=\"search-books\">\r\n        <div className=\"search-books-bar\">\r\n          <button className=\"close-search\" onClick={() => { this.props.history.push('/') }}>Close</button>\r\n          <div className=\"search-books-input-wrapper\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search by title or author\"\r\n              onChange={this.handleQueryChange}\r\n              value={query}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"search-books-results\">\r\n  \r\n          <ol className=\"books-grid\">\r\n            {books.map((book, index) => {\r\n              const myBook = myBooks.get(book.id) || {}\r\n              return (\r\n                <Book\r\n                  key={index}\r\n                  book={{\r\n                    ...book,\r\n                    shelf: myBook.shelf || 'none',\r\n                  }}\r\n                />\r\n              )\r\n            })}\r\n          </ol>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default SearchBooks","import React from 'react'\r\nimport {Switch, Route} from 'react-router'\r\n\r\nimport './App.css'\r\nimport HomePage from './component/HomePage'\r\nimport SearchBooks from './component/SearchBooks'\r\n\r\n\r\nclass BooksApp extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n    <div className='app'>\r\n      <Switch>\r\n        <Route \r\n        exact \r\n        path='/'\r\n        component={HomePage}\r\n        /> \r\n     \r\n        <Route exact \r\n        path='/search' \r\n        component={SearchBooks} \r\n        /> \r\n      </Switch>\r\n    </div>\r\n         \r\n    )\r\n  }\r\n}\r\n\r\nexport default BooksApp\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport BooksApp from './BooksApp'\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n        <BooksApp />                                                                                          \r\n    </BrowserRouter>, document.getElementById('root'))\r\n"],"sourceRoot":""}