(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(29)},22:function(e,t,n){},27:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(14),c=n.n(r),s=n(34),l=n(4),i=n(10),u=n(7),h=n(5),m=n(8),b=n(32),f=n(33),p=(n(22),n(12)),d=n(9),k="https://reactnd-books-api.udacity.com",v=localStorage.token;v||(v=localStorage.token=Math.random().toString(36).substr(-8));var g={Accept:"application/json",Authorization:v},y=function(){return fetch("".concat(k,"/books"),{headers:g}).then(function(e){return e.json()}).then(function(e){return e.books})},E=function(e,t){return fetch("".concat(k,"/books/").concat(e.id),{method:"PUT",headers:Object(d.a)({},g,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},j=function(e){return fetch("".concat(k,"/search"),{method:"POST",headers:Object(d.a)({},g,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},O={currentlyReading:"Currently Reading",wantToRead:"Want to Read",read:"Read"},C=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleShelfChange=function(e){var t=e.target.value;E(n.props.book,t).then(function(){n.props.onShelfChange&&n.props.onShelfChange()})},n.render=function(){var e=n.props.book;return o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url( ".concat(e.imageLinks?e.imageLinks.thumbnail:"",")")}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{defaultValue:e.shelf||"none",onChange:n.handleShelfChange},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),Object.entries(O).map(function(e){var t=Object(p.a)(e,2),n=t[0],a=t[1];return o.a.createElement("option",{key:n,value:n},a)}),o.a.createElement("option",{value:"none"},"None")))),o.a.createElement("div",{className:"book-title"},e.title),e.authors&&o.a.createElement("div",{className:"book-authors"},e.authors?e.authors.join(", "):"None"))},n}return Object(m.a)(t,e),t}(o.a.Component),N=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).render=function(){var e=n.props,t=e.title,a=e.books;return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},t),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},a.map(function(e,t){return o.a.createElement("li",{key:t},o.a.createElement(C,{book:e,onShelfChange:n.props.onShelfChange}))}))))},n}return Object(m.a)(t,e),t}(o.a.Component),S=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={books:[]},n.componentDidMount=function(){n.refreshBooks()},n.refreshBooks=function(){y().then(function(e){n.setState(function(){return{books:e}})})},n.onShelfChange=function(){n.refreshBooks()},n.render=function(){var e=n.state.books.reduce(function(e,t){return t.shelf&&(e[t.shelf]=(e[t.shelf]||[]).concat([t])),e},{});return console.log(e),o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",null,Object.entries(O).map(function(t){var a=Object(p.a)(t,2),r=a[0],c=a[1];return o.a.createElement(N,{key:r,title:c,books:e[r]||[],onShelfChange:n.onShelfChange})})),o.a.createElement("div",{className:"open-search"},o.a.createElement("button",{onClick:function(){n.props.history.push("/search")}},"Add a book")))},n}return Object(m.a)(t,e),t}(o.a.Component),w=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={query:"",books:[],myBooks:{}},n.handleQueryChange=function(e){var t=e.target.value;n.setState({query:t}),t.length>0&&j(t).then(function(e){n.setState({books:e.length?e:[]})}),0===t.length&&n.setState({books:[]})},n.render=function(){var e=n.state,t=e.query,a=e.books,r=e.myBooks;return console.log(r),o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement("button",{className:"close-search",onClick:function(){n.props.history.push("/")}},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:n.handleQueryChange,value:t}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},a.map(function(e,t){var n=r.get(e.id)||{};return o.a.createElement(C,{key:t,book:Object(d.a)({},e,{shelf:n.shelf||"none"})})}))))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;y().then(function(t){var n=new Map(t.length?t.map(function(e){return[e.id,e]}):[]);e.setState({myBooks:n})})}}]),t}(o.a.Component),A=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"app"},o.a.createElement(b.a,null,o.a.createElement(f.a,{exact:!0,path:"/",component:S}),o.a.createElement(f.a,{exact:!0,path:"/search",component:w})))}}]),t}(o.a.Component);n(27);c.a.render(o.a.createElement(s.a,{basename:"/myreads-demo"},o.a.createElement(A,null)),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.57a1698b.chunk.js.map